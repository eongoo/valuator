!function(t){!function(){function e(e){for(var n,i,r=e.css("color"),e=e[0],s=!1;e&&!i&&!s;){try{n=t(e).css("background-color")}catch(o){n="transparent"}"transparent"!==n&&"rgba(0, 0, 0, 0)"!==n&&(i=n),s=e.body,e=e.parentNode}var a,e=/rgb[a]*\((\d+),\s*(\d+),\s*(\d+)/,s=/#([AaBbCcDdEeFf\d]{2})([AaBbCcDdEeFf\d]{2})([AaBbCcDdEeFf\d]{2})/;n=void 0,(n=r.match(e))?a={r:parseInt(n[1],10),g:parseInt(n[2],10),b:parseInt(n[3],10)}:(n=r.match(s))&&(a={r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16)});var h;return i?(n=void 0,(n=i.match(e))?h={r:parseInt(n[1],10),g:parseInt(n[2],10),b:parseInt(n[3],10)}:(n=i.match(s))&&(h={r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16)})):h=a&&127<Math.max.apply(null,[a.r,a.g,a.b])?{r:0,g:0,b:0}:{r:255,g:255,b:255},n=function(t){return"rgb("+[t.r,t.g,t.b].join(", ")+")"},a&&h?(e=Math.max.apply(null,[a.r,a.g,a.b]),a=Math.max.apply(null,[h.r,h.g,h.b]),a=Math.round(a+-.75*(a-e)),a={r:a,g:a,b:a}):a?(a=Math.max.apply(null,[a.r,a.g,a.b]),e=1,a>127&&(e=-1),a=Math.round(a+96*e),a={r:a,g:a,b:a}):a={r:191,g:191,b:191},{color:r,"background-color":h?n(h):i,"decor-color":n(a)}}function n(t,e){this.x=t,this.y=e,this.reverse=function(){return new this.constructor(-1*this.x,-1*this.y)},this._length=null,this.getLength=function(){return this._length||(this._length=Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))),this._length};var n=function(t){return Math.round(t/Math.abs(t))};this.resizeTo=function(t){if(0===this.x&&0===this.y)this._length=0;else if(0===this.x)this._length=t,this.y=t*n(this.y);else if(0===this.y)this._length=t,this.x=t*n(this.x);else{var e=Math.abs(this.y/this.x),i=Math.sqrt(Math.pow(t,2)/(1+Math.pow(e,2))),e=e*i;this._length=t,this.x=i*n(this.x),this.y=e*n(this.y)}return this},this.angleTo=function(t){var e=this.getLength()*t.getLength();return 0===e?0:Math.acos(Math.min(Math.max((this.x*t.x+this.y*t.y)/e,-1),1))/Math.PI}}function i(t,e){this.x=t,this.y=e,this.getVectorToCoordinates=function(t,e){return new n(t-this.x,e-this.y)},this.getVectorFromCoordinates=function(t,e){return this.getVectorToCoordinates(t,e).reverse()},this.getVectorToPoint=function(t){return new n(t.x-this.x,t.y-this.y)},this.getVectorFromPoint=function(t){return this.getVectorToPoint(t).reverse()}}function r(t,e,n,i,r){if(this.data=t,this.context=e,t.length)for(var s,o,a=t.length,h=0;a>h;h++){s=t[h],o=s.x.length,n.call(e,s);for(var u=1;o>u;u++)i.call(e,s,u);r.call(e,s)}this.changed=function(){},this.startStrokeFn=n,this.addToStrokeFn=i,this.endStrokeFn=r,this.inStroke=!1,this._stroke=this._lastPoint=null,this.startStroke=function(t){if(t&&"number"==typeof t.x&&"number"==typeof t.y){this._stroke={x:[t.x],y:[t.y]},this.data.push(this._stroke),this._lastPoint=t,this.inStroke=!0;var e=this._stroke,n=this.startStrokeFn,i=this.context;return setTimeout(function(){n.call(i,e)},3),t}return null},this.addToStroke=function(t){if(this.inStroke&&"number"==typeof t.x&&"number"==typeof t.y&&4<Math.abs(t.x-this._lastPoint.x)+Math.abs(t.y-this._lastPoint.y)){var e=this._stroke.x.length;this._stroke.x.push(t.x),this._stroke.y.push(t.y),this._lastPoint=t;var n=this._stroke,i=this.addToStrokeFn,r=this.context;return setTimeout(function(){i.call(r,n,e)},3),t}return null},this.endStroke=function(){var t=this.inStroke;if(this.inStroke=!1,this._lastPoint=null,t){var e=this._stroke,n=this.endStrokeFn,i=this.context,r=this.changed;return setTimeout(function(){n.call(i,e),r.call(i)},3),!0}return null}}function s(n,r,s){var u=this.$parent=t(n),n=this.eventTokens={};this.events=new h(this);var c=t.fn[o]("globalEvents"),l={width:"ratio",height:"ratio",sizeRatio:1,color:"#000","background-color":"#fff","decor-color":"#eee",lineWidth:0,minFatFingerCompensation:-10,showUndoButton:!1,data:[]};t.extend(l,e(u)),r&&t.extend(l,r),this.settings=l;for(var d in s)s.hasOwnProperty(d)&&s[d].call(this,d);this.events.publish(o+".initializing"),this.$controlbarUpper=t('<div style="padding:0 !important;margin:0 !important;width: 100% !important; height: 0 !important;margin-top:-1em !important;margin-bottom:1em !important;"></div>').appendTo(u),this.isCanvasEmulator=!1,s=this.canvas=this.initializeCanvas(l),r=t(s),this.$controlbarLower=t('<div style="padding:0 !important;margin:0 !important;width: 100% !important; height: 0 !important;margin-top:-1.5em !important;margin-bottom:1.5em !important;"></div>').appendTo(u),this.canvasContext=s.getContext("2d"),r.data(o+".this",this),u=(u=l.lineWidth)?u:Math.max(Math.round(s.width/400),2),l.lineWidth=u,this.lineCurveThreshold=3*l.lineWidth,l.cssclass&&""!=t.trim(l.cssclass)&&r.addClass(l.cssclass),this.fatFingerCompensation=0;var u=function(e){var n,r,s=function(t){return t=t.changedTouches&&0<t.changedTouches.length?t.changedTouches[0]:t,new i(Math.round(t.pageX+n),Math.round(t.pageY+r)+e.fatFingerCompensation)},o=new a(750,function(){e.dataEngine.endStroke()});return this.drawEndHandler=function(t){try{t.preventDefault()}catch(n){}o.clear(),e.dataEngine.endStroke()},this.drawStartHandler=function(i){i.preventDefault();var a=t(e.canvas).offset();n=-1*a.left,r=-1*a.top,e.dataEngine.startStroke(s(i)),o.kick()},this.drawMoveHandler=function(t){t.preventDefault(),e.dataEngine.inStroke&&(e.dataEngine.addToStroke(s(t)),o.kick())},this}.call({},this),g=u.drawEndHandler,p=u.drawStartHandler,f=u.drawMoveHandler,v=this.canvas,r=t(v);this.isCanvasEmulator?(r.bind("mousemove."+o,f),r.bind("mouseup."+o,g),r.bind("mousedown."+o,p)):(v.ontouchstart=function(t){v.onmousedown=void 0,v.onmouseup=void 0,v.onmousemove=void 0,this.fatFingerCompensation=l.minFatFingerCompensation&&-3*l.lineWidth>l.minFatFingerCompensation?-3*l.lineWidth:l.minFatFingerCompensation,p(t),v.ontouchend=g,v.ontouchstart=p,v.ontouchmove=f},v.onmousedown=function(t){v.ontouchstart=void 0,v.ontouchend=void 0,v.ontouchmove=void 0,p(t),v.onmousedown=p,v.onmouseup=g,v.onmousemove=f}),n[o+".windowmouseup"]=c.subscribe(o+".windowmouseup",u.drawEndHandler),this.events.publish(o+".attachingEventHandlers");var y=this,n=l.width.toString(10),x=o;return("ratio"===n||"%"===n.split("")[n.length-1])&&(this.eventTokens[x+".parentresized"]=c.subscribe(x+".parentresized",function(t,e,n){return function(){var i=e.width();if(i!==n){for(var r in t)t.hasOwnProperty(r)&&(c.unsubscribe(t[r]),delete t[r]);var s=y.settings;y.$parent.children().remove();for(r in y)y.hasOwnProperty(r)&&delete y[r];r=s.data;var o,a,h,u,l,d,i=1*i/n,g=[];for(a=0,h=r.length;h>a;a++){for(d=r[a],o={x:[],y:[]},u=0,l=d.x.length;l>u;u++)o.x.push(d.x[u]*i),o.y.push(d.y[u]*i);g.push(o)}s.data=g,e[x](s)}}}(this.eventTokens,this.$parent,this.$parent.width(),1*this.canvas.width/this.canvas.height))),this.resetCanvas(l.data),this.events.publish(o+".initialized"),this}var o="jSignature",a=function(t,e){var n;return this.kick=function(){clearTimeout(n),n=setTimeout(e,t)},this.clear=function(){clearTimeout(n)},this},h=function(t){this.topics={},this.context=t?t:this,this.publish=function(t,e,n,i){if(this.topics[t]){var r,s,o,a,h=this.topics[t],u=Array.prototype.slice.call(arguments,1),c=[];for(s=0,o=h.length;o>s;s++)a=h[s],r=a[0],a[1]&&(a[0]=function(){},c.push(s)),r.apply(this.context,u);for(s=0,o=c.length;o>s;s++)h.splice(c[s],1)}},this.subscribe=function(t,e,n){return this.topics[t]?this.topics[t].push([e,n]):this.topics[t]=[[e,n]],{topic:t,callback:e}},this.unsubscribe=function(t){if(this.topics[t.topic])for(var e=this.topics[t.topic],n=0,i=e.length;i>n;n++)e[n][0]===t.callback&&e.splice(n,1)}},u=function(t){var e=this.canvasContext,n=t.x[0],t=t.y[0],i=this.settings.lineWidth,r=e.fillStyle;e.fillStyle=e.strokeStyle,e.fillRect(n+i/-2,t+i/-2,i,i),e.fillStyle=r},c=function(t,e){var r=new i(t.x[e-1],t.y[e-1]),s=new i(t.x[e],t.y[e]),o=r.getVectorToPoint(s);if(e>1){var a,h=new i(t.x[e-2],t.y[e-2]),u=h.getVectorToPoint(r);if(u.getLength()>this.lineCurveThreshold){a=e>2?new i(t.x[e-3],t.y[e-3]).getVectorToPoint(h):new n(0,0);var c=.35*u.getLength(),l=u.angleTo(a.reverse()),d=o.angleTo(u.reverse());a=new n(a.x+u.x,a.y+u.y).resizeTo(Math.max(.05,l)*c);var g=new n(u.x+o.x,u.y+o.y).reverse().resizeTo(Math.max(.05,d)*c),u=this.canvasContext,c=h.x,d=h.y,l=r.x,p=r.y,f=h.x+a.x,h=h.y+a.y;a=r.x+g.x,g=r.y+g.y,u.beginPath(),u.moveTo(c,d),u.bezierCurveTo(f,h,a,g,l,p),u.stroke()}}o.getLength()<=this.lineCurveThreshold&&(o=this.canvasContext,h=r.x,r=r.y,a=s.x,s=s.y,o.beginPath(),o.moveTo(h,r),o.lineTo(a,s),o.stroke())},l=function(t){var e=t.x.length-1;if(e>0){var r=new i(t.x[e],t.y[e]),s=new i(t.x[e-1],t.y[e-1]),o=s.getVectorToPoint(r);if(o.getLength()>this.lineCurveThreshold){if(e>1){var t=new i(t.x[e-2],t.y[e-2]).getVectorToPoint(s),a=new n(t.x+o.x,t.y+o.y).resizeTo(o.getLength()/2),o=this.canvasContext,t=s.x,e=s.y,h=r.x,u=r.y,c=s.x+a.x,s=s.y+a.y,a=r.x,r=r.y;o.beginPath(),o.moveTo(t,e),o.bezierCurveTo(c,s,a,r,h,u)}else o=this.canvasContext,t=s.x,s=s.y,e=r.x,r=r.y,o.beginPath(),o.moveTo(t,s),o.lineTo(e,r);o.stroke()}}};s.prototype.resetCanvas=function(e){var n=this.canvas,i=this.settings,s=this.canvasContext,a=this.isCanvasEmulator,h=n.width,d=n.height;s.clearRect(0,0,h+30,d+30),s.shadowColor=s.fillStyle=i["background-color"],a&&s.fillRect(0,0,h+30,d+30),s.lineWidth=Math.ceil(parseInt(i.lineWidth,10)),s.lineCap=s.lineJoin="round",s.strokeStyle=i["decor-color"],s.shadowOffsetX=0,s.shadowOffsetY=0;var g=Math.round(d/5),p=1.5*g,f=d-g,h=h-1.5*g,d=d-g;s.beginPath(),s.moveTo(p,f),s.stroke(),s.strokeStyle=i.color,a||(s.shadowColor=s.strokeStyle,s.shadowOffsetX=.5*s.lineWidth,s.shadowOffsetY=-.6*s.lineWidth,s.shadowBlur=0),e||(e=[]),s=this.dataEngine=new r(e,this,u,c,l),i.data=e,t(n).data(o+".data",e).data(o+".settings",i);var v=this.$parent,y=this.events,x=o;return s.changed=function(){y.publish(x+".change"),v.trigger("change")},s.changed(),!0},s.prototype.initializeCanvas=function(e){var n=document.createElement("canvas"),i=t(n);if(e.width===e.height&&"ratio"===e.height&&(e.width="100%"),i.css("margin",0).css("padding",0).css("border","none").css("height","ratio"!==e.height&&e.height?e.height.toString(10):1).css("width","ratio"!==e.width&&e.width?e.width.toString(10):1),i.appendTo(this.$parent),"ratio"===e.height?i.css("height",Math.round(i.width()/e.sizeRatio)):"ratio"===e.width&&i.css("width",Math.round(i.height()*e.sizeRatio)),i.addClass(o),n.width=i.width(),n.height=i.height(),e=n,e.getContext)e=!1;else{var i=e.ownerDocument.parentWindow,r=i.FlashCanvas?e.ownerDocument.parentWindow.FlashCanvas:"undefined"==typeof FlashCanvas?void 0:FlashCanvas;if(!r)throw Error("Canvas element does not support 2d context. jSignature cannot proceed.");if(e=r.initElement(e),r=1,i&&i.screen&&i.screen.deviceXDPI&&i.screen.logicalXDPI&&(r=1*i.screen.deviceXDPI/i.screen.logicalXDPI),1!==r)try{t(e).children("object").get(0).resize(Math.ceil(e.width*r),Math.ceil(e.height*r)),e.getContext("2d").scale(r,r)}catch(s){}e=!0}return this.isCanvasEmulator=e,n.onselectstart=function(t){return t&&t.preventDefault&&t.preventDefault(),t&&t.stopPropagation&&t.stopPropagation(),!1},n};var d,g=window,p=function(t,e){var n=new Image,i=this;n.onload=function(){i.getContext("2d").drawImage(n,0,0,n.width<i.width?n.width:i.width,n.height<i.height?n.height:i.height)},n.src="data:"+e+","+t},f=function(t){return this.find("canvas."+o).add(this.filter("canvas."+o)).data(o+".this").resetCanvas(t),this},v=function(t,e){if(void 0!==e||"string"!=typeof t||"data:"!==t.substr(0,5)||(e=t.slice(5).split(",")[0],t=t.slice(6+e.length),e!==t)){var n=this.find("canvas."+o).add(this.filter("canvas."+o));if(!T.hasOwnProperty(e))throw Error(o+" is unable to find import plugin with for format '"+String(e)+"'");return 0!==n.length&&T[e].call(n[0],t,e,function(t){return function(){return t.resetCanvas.apply(t,arguments)}}(n.data(o+".this"))),this}},y=new h,x=o,m=function(){y.publish(x+".parentresized")};t(g).bind("resize."+x,function(){d&&clearTimeout(d),d=setTimeout(m,500)}).bind("mouseup."+x,function(){y.publish(x+".windowmouseup")});var w={},b={"default":function(){return this.toDataURL()},"native":function(t){return t},image:function(){var t=this.toDataURL();if("string"==typeof t&&4<t.length&&"data:"===t.slice(0,5)&&-1!==t.indexOf(",")){var e=t.indexOf(",");return[t.slice(5,e),t.substr(e+1)]}return[]}},T={"native":function(t,e,n){n(t)},image:p,"image/png;base64":p,"image/jpeg;base64":p,"image/jpg;base64":p},C={"export":b,"import":T,instance:w},M={init:function(t){return this.each(function(){var e,n=!1;for(e=this.parentNode;e&&!n;)n=e.body,e=e.parentNode;!n||new s(this,t,w)})},getSettings:function(){return this.find("canvas."+o).add(this.filter("canvas."+o)).data(o+".this").settings},clear:f,reset:f,addPlugin:function(t,e,n){return C.hasOwnProperty(t)&&(C[t][e]=n),this},listPlugins:function(t){var e=[];if(C.hasOwnProperty(t)){var n,t=C[t];for(n in t)t.hasOwnProperty(n)&&e.push(n)}return e},getData:function(t){var e=this.find("canvas."+o).add(this.filter("canvas."+o));return void 0===t&&(t="default"),0!==e.length&&b.hasOwnProperty(t)?b[t].call(e.get(0),e.data(o+".data")):void 0},importData:v,setData:v,globalEvents:function(){return y},events:function(){return this.find("canvas."+o).add(this.filter("canvas."+o)).data(o+".this").events}};t.fn[o]=function(e){return e&&"object"!=typeof e?"string"==typeof e&&M[e]?M[e].apply(this,Array.prototype.slice.call(arguments,1)):void t.error("Method "+String(e)+" does not exist on jQuery."+o):M.init.apply(this,arguments)}}(),function(){t.fn.jSignature("addPlugin","instance","UndoButton",function(e){this.events.subscribe("jSignature.attachingEventHandlers",function(){if(this.settings[e]){var n=this.settings[e];"function"!=typeof n&&(n=function(){var e=t('<input type="button" value="Undo last stroke" style="position:absolute;display:none;margin:0 !important;top:auto" />').appendTo(this.$controlbarLower),n=e.width();return e.css("left",Math.round((this.canvas.width-n)/2)),n!==e.width()&&e.width(n),e});var i=n.call(this),r=this;r.events.subscribe("jSignature.change",function(){r.dataEngine.data.length?i.show():i.hide()});var s=this,o=(this.events.topics.hasOwnProperty("jSignature.undo")?e:"jSignature")+".undo";i.bind("click",function(){s.events.publish(o)}),s.events.subscribe(o,function(){var t=s.dataEngine.data;t.length&&(t.pop(),s.resetCanvas(t))})}})})}(),function(){for(var t={},e={},n="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWX".split(""),i=n.length/2,r=i-1;r>-1;r--)t[n[r]]=n[r+i],e[n[r+i]]=n[r];var s=function(e){for(var e=e.split(""),n=e.length,i=1;n>i;i++)e[i]=t[e[i]];return e.join("")},o=function(t){for(var e,n,r=[],o=0,a=1,h=t.length,u=0;h>u;u++)e=Math.round(t[u]),n=e-o,o=e,0>n&&a>0?(a=-1,r.push("Z")):n>0&&0>a&&(a=1,r.push("Y")),e=Math.abs(n),e>=i?r.push(s(e.toString(i))):r.push(e.toString(i));return r.join("")},a=function(n){for(var r,s=[],n=n.split(""),o=n.length,a=1,h=[],u=0,c=0;o>c;c++)r=n[c],r in t||"Z"===r||"Y"===r?(0!==h.length&&(h=parseInt(h.join(""),i)*a+u,s.push(h),u=h),"Z"===r?(a=-1,h=[]):"Y"===r?(a=1,h=[]):h=[r]):h.push(e[r]);return s.push(parseInt(h.join(""),i)*a+u),s},h=function(t){for(var e,n=[],i=t.length,r=0;i>r;r++)e=t[r],n.push(o(e.x)),n.push(o(e.y));return n.join("_")},u=function(t){for(var e=[],t=t.split("_"),n=t.length/2,i=0;n>i;i++)e.push({x:a(t[2*i]),y:a(t[2*i+1])});return e},n=function(t){return["image/jsignature;base30",h(t)]},r=function(t,e,n){"string"==typeof t&&("image/jsignature;base30"===t.substring(0,23).toLowerCase()&&(t=t.substring(24)),n(u(t)))};if(null==this.jQuery)throw Error("We need jQuery for some of the functionality. jQuery is not detected. Failing to initialize...");var c=this.jQuery.fn.jSignature;c("addPlugin","export","base30",n),c("addPlugin","export","image/jsignature;base30",n),c("addPlugin","import","base30",r),c("addPlugin","import","image/jsignature;base30",r),this.jSignatureDebug&&(this.jSignatureDebug.base30={remapTailChars:s,compressstrokeleg:o,uncompressstrokeleg:a,compressstrokes:h,uncompressstrokes:u,charmap:t})}.call("undefined"!=typeof window?window:this),function(){function e(t,e){this.x=t,this.y=e,this.reverse=function(){return new this.constructor(-1*this.x,-1*this.y)},this._length=null,this.getLength=function(){return this._length||(this._length=Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))),this._length};var n=function(t){return Math.round(t/Math.abs(t))};this.resizeTo=function(t){if(0===this.x&&0===this.y)this._length=0;else if(0===this.x)this._length=t,this.y=t*n(this.y);else if(0===this.y)this._length=t,this.x=t*n(this.x);else{var e=Math.abs(this.y/this.x),i=Math.sqrt(Math.pow(t,2)/(1+Math.pow(e,2))),e=e*i;this._length=t,this.x=i*n(this.x),this.y=e*n(this.y)}return this},this.angleTo=function(t){var e=this.getLength()*t.getLength();return 0===e?0:Math.acos(Math.min(Math.max((this.x*t.x+this.y*t.y)/e,-1),1))/Math.PI}}function n(t,n){this.x=t,this.y=n,this.getVectorToCoordinates=function(t,n){return new e(t-this.x,n-this.y)},this.getVectorFromCoordinates=function(t,e){return this.getVectorToCoordinates(t,e).reverse()},this.getVectorToPoint=function(t){return new e(t.x-this.x,t.y-this.y)},this.getVectorFromPoint=function(t){return this.getVectorToPoint(t).reverse()}}function i(t,e){var n=Math.pow(10,e);return Math.round(t*n)/n}function r(t,r,s){var r=r+1,o=new n(t.x[r-1],t.y[r-1]),a=new n(t.x[r],t.y[r]),a=o.getVectorToPoint(a),h=new n(t.x[r-2],t.y[r-2]),o=h.getVectorToPoint(o);return o.getLength()>s?(s=r>2?new n(t.x[r-3],t.y[r-3]).getVectorToPoint(h):new e(0,0),t=.35*o.getLength(),h=o.angleTo(s.reverse()),r=a.angleTo(o.reverse()),s=new e(s.x+o.x,s.y+o.y).resizeTo(Math.max(.05,h)*t),a=new e(o.x+a.x,o.y+a.y).reverse().resizeTo(Math.max(.05,r)*t),a=new e(o.x+a.x,o.y+a.y),["c",i(s.x,2),i(s.y,2),i(a.x,2),i(a.y,2),i(o.x,2),i(o.y,2)]):["l",i(o.x,2),i(o.y,2)]}function s(t,r){var s=t.x.length-1,o=new n(t.x[s],t.y[s]),a=new n(t.x[s-1],t.y[s-1]),o=a.getVectorToPoint(o);if(s>1&&o.getLength()>r){var s=new n(t.x[s-2],t.y[s-2]).getVectorToPoint(a),a=o.angleTo(s.reverse()),h=.35*o.getLength(),s=new e(s.x+o.x,s.y+o.y).resizeTo(Math.max(.05,a)*h);return["c",i(s.x,2),i(s.y,2),i(o.x,2),i(o.y,2),i(o.x,2),i(o.y,2)]}return["l",i(o.x,2),i(o.y,2)]}function o(t,e,n){for(var e=["M",i(t.x[0]-e,2),i(t.y[0]-n,2)],n=1,o=t.x.length-1;o>n;n++)e.push.apply(e,r(t,n,1));return o>0?e.push.apply(e,s(t,n,1)):0===o&&e.push.apply(e,["l",1,1]),e.join(" ")}function a(t){var e,n,i=['<?xml version="1.0" encoding="UTF-8" standalone="no"?>','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">'],r=t.length,s=[],a=[],h=n=e=0,u=0,c=[];if(0!==r){for(e=0;r>e;e++){h=t[e],u=[],n={x:[],y:[]};for(var l=void 0,d=void 0,l=0,d=h.x.length;d>l;l++)u.push({x:h.x[l],y:h.y[l]});for(u=simplify(u,.7,!0),l=0,d=u.length;d>l;l++)n.x.push(u[l].x),n.y.push(u[l].y);c.push(n),s=s.concat(n.x),a=a.concat(n.y)}t=Math.min.apply(null,s)-1,r=Math.max.apply(null,s)+1,s=Math.min.apply(null,a)-1,a=Math.max.apply(null,a)+1,h=0>t?0:t,u=0>s?0:s,e=r-t,n=a-s}for(i.push('<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="'+e.toString()+'" height="'+n.toString()+'">'),e=0,r=c.length;r>e;e++)n=c[e],i.push('<path fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="'+o(n,h,u)+'"/>');return i.push("</svg>"),i.join("")}function h(t){return[d,a(t)]}function u(t){return[g,l(a(t))]}var c=window;if(("undefined"!=typeof exports?exports:c).simplify=function(t,e,n){if(e=void 0!==e?e*e:1,!n){for(var i,r=t.length,s=t[0],o=[s],n=1;r>n;n++){i=t[n];var a=i.x-s.x,h=i.y-s.y;a*a+h*h>e&&(o.push(i),s=i)}s!==i&&o.push(i),t=o}i=t;var u,c,n=i.length,r=new("undefined"!=typeof Uint8Array?Uint8Array:Array)(n),s=0,o=n-1,l=[],d=[],g=[];for(r[s]=r[o]=1;o;){for(h=0,a=s+1;o>a;a++){u=i[a];var p=i[s],f=i[o],v=p.x,y=p.y,p=f.x-v,x=f.y-y,m=void 0;(0!==p||0!==x)&&(m=((u.x-v)*p+(u.y-y)*x)/(p*p+x*x),m>1?(v=f.x,y=f.y):m>0&&(v+=p*m,y+=x*m)),p=u.x-v,x=u.y-y,u=p*p+x*x,u>h&&(c=a,h=u)}h>e&&(r[c]=1,l.push(s),d.push(c),l.push(c),d.push(o)),s=l.pop(),o=d.pop()}for(a=0;n>a;a++)r[a]&&g.push(i[a]);return t=g},"function"!=typeof l)var l=function(t){var e,n,i,r,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".split(""),o=0,a=0,h="",h=[];do e=t.charCodeAt(o++),n=t.charCodeAt(o++),i=t.charCodeAt(o++),r=e<<16|n<<8|i,e=r>>18&63,n=r>>12&63,i=r>>6&63,r&=63,h[a++]=s[e]+s[n]+s[i]+s[r];while(o<t.length);return h=h.join(""),t=t.length%3,(t?h.slice(0,t-3):h)+"===".slice(t||3)};var d="image/svg+xml",g="image/svg+xml;base64";if("undefined"==typeof t)throw Error("We need jQuery for some of the functionality. jQuery is not detected. Failing to initialize...");c=t.fn.jSignature,c("addPlugin","export","svg",h),c("addPlugin","export",d,h),c("addPlugin","export","svgbase64",u),c("addPlugin","export",g,u)}()}(jQuery);
